{
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
	"name": "MSG",
	"patterns": 
	[
		{
			"include": "#title"
		},
		{
			"include": "#ident"
		},
		{
			"include": "#facility"
		},
		{
			"include": "#end"
		},
		{
			"include": "#page"
		},
		{
			"include": "#comment"
		},
		{
			"include": "#test"
		},
		{
			"include": "#test-comment"
		}
	],
	"repository": 
	{
		"test-comment":
		{
			"patterns": 
			[
				{
					"begin": "(^[ \\t]+)?(?=//)",
					"beginCaptures": 
					{
						"1":
						{
							"name": "punctuation.whitespace.comment.leading.js"
						}
					},
					"end": "(?!\\G)",
					"patterns": 
					[
						{	
							"name": "comment.line.double-slash.js",
							"begin": "//",
							"end": "\\n",
							"beginCaptures":
							{ 
								"0":
								{ 
									"name":"punctuation.definition.comment.js"
								}
							}
						}
					]
				}
			]
		},

		"test":
		{
			"comment": "test: only one token is allowed but with continuations",
			"patterns": 
			[
				{
					"name": "msg.test",
					"begin": "(?i)(\\.test)",
					"beginCaptures": 
					{
						"1":
						{
							"name": "keyword.control"
						}
					},
					"end": "\\n",
					"patterns": 
					[
						{
							"include": "#test-body"
						}
					]
				}
			]
		},
		"test-body":
		{
			"patterns": 
			[
				{
					"include": "#continuation"
				},
				{
					"include": "#comment"
				},
				{
					"begin": "(?<\\k<token>)",
					"end": "(?=\\n)",
					"contentName": "invalid.deprecated"
				},
				{
					"include": "#test-token"
				}
			]
		},
		"test-token":
		{
			"patterns": 
			[
				{
					"name": "test.token",
					"match": "(?i)(?<token>[a-z$_][a-z$_0-9]*)",
					"captures": 
					{
						"0":
						{
							"name": "markup.bold"
						}
					}
				}
			]
		},




		"title": 
		{
			"patterns": 
			[
				{
					"name": "msg.title",
					"match" : "(?i)(\\.title)\\s+([a-z$_][a-z$_0-9]{,30})(\\s+(\\S.{,27})(.*))",
					"captures": 
					{
						"1":
						{
							"name": "msg.title.keyword keyword.control"
						},
						"2":
						{
							"name": "msg.title.modname constant.character"
						},
						"4":
						{
							"name": "msg.title.listing-title string.unquoted"
						},
						"5":
						{
							"name": "invalid.illegal"
						}
					}
				}
			]
		},
		"ident":
		{
			"patterns": 
			[
				{
					"name": "msg.ident",
					"begin": "(?i)(\\.ident)",
					"beginCaptures": 
					{
						"1":
						{
							"name": "msg.ident.keyword keyword.control"
						}
					},
					"end": "\\n",
					"patterns": 
					[
						{
							"name": "msg.ident.identifier-string",
							"begin": "(\"|')",
							"beginCaptures": 
							{
								"1":
								{
									"name": "string.quoted.start"
								}
							},
							"end": "(\\1)(.*)",
							"endCaptures": 
							{
								"1":
								{
									"name": "string.quoted.end"
								},
								"2":
								{
									"patterns": 
									[
										{
											"include": "#comment"
										},
										{
											"name": "invalid.illegal",
											"match": "\\S.*"
										}
									]
								}
							},
							"patterns": 
							[
								{
									"include": "#string-content"
								}
							]
						},
						{
							"name": "msg.ident.identifier",
							"begin": "(?i)([a-z$_][a-z$_0-9]{,30})",
							"beginCaptures": 
							{
								"1":
								{
									"name": "constant.character"
								}
							},
							"end": "(?=\\n)",
							"patterns": 
							[
								{
									"include": "#comment"
								},
								{
									"name": "invalid.illegal",
									"match": "\\S.*"
								}
							]
						},
						{
							"include": "#continuation"
						},
						{
							"include": "#comment"
						}
					]
				}
			]
		},
		"facility": 
		{
			"patterns": 
			[
				{
					"name": "msg.facility",
					"begin": "(?i)(\\.facility)",
					"beginCaptures": 
					{
						"1":
						{
							"name": "msg.facility.keyword keyword.control"
						}
					},
					"end" : "(?i)(?=\\.facility|\\.end)",
					"patterns": 
					[
						{
							"name": "msg.facility.body",
							"begin": "\\G\\s*",
							"end": "\\n",
							"patterns": 
							[
								{
									"include": "#facility.qualifiers"
								},
								{
									"include": "#facility.name"
								},
								{
									"include": "#continuation"
								},
								{
									"include": "#comment"
								}
							]
						},
						{
							"include": "#severity"
						},
						{
							"include": "#literal"
						},
						{
							"include": "#base"
						},
						{
							"include": "#end"
						}
					]
				}
			]
		},
		"facility.qualifiers":
		{
			"patterns": 
			[
				{
					"name": "msg.facility.qualifier.shared",
					"match": "(?i)/shared\\b",
					"captures": 
					{
						"0":
						{
							"name": "variable.parameter"
						}
					}
				},
				{
					"name": "msg.facility.qualifier.system",
					"match": "(?i)/system\\b",
					"captures": 
					{
						"0":
						{
							"name": "variable.parameter"
						}
					}
				},
				{
					"name": "msg.facility.qualifier.prefix",
					"begin": "(?i)/prefix\\s*",
					"beginCaptures": 
					{
						"0":
						{
							"name": "variable.parameter"
						}
					},
					"end": "(?=\\s|\\n|/)",
					"patterns": 
					[
						{
							"begin": "\\s*(=)\\s*",
							"beginCaptures": 
							{
								"0":
								{
									"name": "variable.parameter"
								},
								"1":
								{
									"name": "msg.facility.qualifier.prefix.eq"
								}
							},
							"end": "(?=\\s|\\n|/)",
							"patterns": 
							[
								{
									"name": "msg.facility.qualifier.prefix.value",
									"match": "(?i)([a-z$_][a-z$_0-9]{,7})([^/\\s,]*)",
									"captures": 
									{
										"1":
										{
											"name": "string.regexp"
										},
										"2":
										{
											"name": "invalid.illegal"
										}
									}						
								}
							]
						},
						{
							"include": "#comment"
						},
						{
							"include": "#continuation"
						}
					]
				},
				{
					"name": "invalid.illegal",
					"match": "/\\S*"
				}
			]
		},
		"facility.name":
		{
			"patterns": 
			[
				{
					"name": "msg.facility.name",
					"begin": "(?i)\\b([a-z$_][a-z$_0-9]{,8})\\b",
					"beginCaptures": 
					{
						"1":
						{
							"name": "constant.character"
						},
						"2":
						{
							"name": "msg.facility.separator"
						}
					},
					"end": "(?i)(?=\\n|/prefix|/system|/shared)",
					"patterns": 
					[
						{
							"include": "#continuation"
						},
						{
							"include": "#facility.expression-start"
						},
						{
							"name": "invalid.illegal",
							"match": "\\S"
						}
					]
				}
			]
		},
		"facility.expression-start":
		{
			"patterns": 
			[
				{
					"name": "msg.facility.expression",
					"begin": "(\\s*,\\s*|\\s*)",
					"beginCaptures": 
					{
						"0":
						{
							"name": "msg.facility.comma"
						}
					},
					"end": "(?i)(?=\\n|/prefix|/system|/shared)",
					"patterns": 
					[
						{
							"include": "#expression"
						},
						{
							"include": "#comment"
						},
						{
							"include": "#continuation"
						},
						{
							"name": "invalid.illegal.1",
							"begin": "\\S",
							"end": "(?i)(?=\\n|/prefix|/system|/shared)"
						}
					]
				}
			]
		},
		"expression":
		{
			"patterns": 
			[
				{
					"begin": "\\(",
					"beginCaptures": 
					{
						"0":
						{
							"name": "msg.expression.bracket.start"
						}
					},
					"end": "\\)",
					"endCaptures": 
					{
						"0":
						{
							"name": "msg.expression.bracket.end"
						}
					},
					"patterns": 
					[
						{
							"include": "#expression"
						}
					]
				},
				{
					"include": "#expression.unary"
				}
			]
		},
		"expression.unary":
		{
			"patterns": 
			[
				{
					"name": "msg.expression.unary",
					"begin": "\\s*(\\+|\\-)\\s*",
					"beginCaptures": 
					{
						"0":
						{
							"name": "string.regexp"
						}
					},
					"end": "(?i)(?=\\)|\\+|\\-|\\*|/|@|\\s|\\n|/prefix|/system|/shared)",
					"patterns": 
					[
						{
							"include": "#expression.token"
						},
						{
							"include": "#expression.number"
						}
					]
				},
				{
					"include": "#expression.token"
				},
				{
					"include": "#expression.number"
				}
			]
		},
		"expression.token":
		{
			"patterns": 
			[
				{
					"name": "msg.expression.token",
					"match": "\\G(?i)[a-z$_][a-z$_0-9]*",
					"captures": 
					{
						"0":
						{
							"name": "markup.bold"
						}
					}
				}
			]
		},
		"expression.number":
		{
			"patterns": 
			[
				{
					"name": "msg.expression.number",
					"match": "\\G[1-9][0-9]*",
					"captures": 
					{
						"0":
						{
							"name": "constant.numeric"
						}
					}
				}
			]
		},
		"page": 
		{
			"patterns": 
			[
				{
					"name": "msg.page",
					"match": "(?i)(\\.page)",
					"captures": 
					{
						"1":
						{
							"name": "msg.page.keyword keyword.control"
						}
					}
				}
			]
		},
		"end": 
		{
			"patterns": 
			[
				{
					"name": "msg.end",
					"match": "(?i)(\\.end)",
					"captures": 
					{
						"1":
						{
							"name": "msg.end.keyword keyword.control"
						}
					}
				}
			]
		},
		"base": 
		{
			"patterns": 
			[
				{
					"name": "msg.base",
					"begin": "(?i)(\\.base)",
					"beginCaptures": 
					{
						"1":
						{
							"name": "msg.base.keyword keyword.control"
						}
					},
					"end": "\\n",
					"patterns": 
					[
						{
							"name": "msg.base.number",
							"begin": "(?i)([1-9][0-9]{,3})",
							"beginCaptures": 
							{
								"1":
								{
									"name": "constant.character"
								}
							},
							"end": "(?=\\n)",
							"patterns": 
							[
								{
									"include": "#comment"
								},
								{
									"name": "invalid.illegal",
									"match": "\\S.*"
								}
							]
						},
						{
							"include": "#continuation"
						},
						{
							"include": "#comment"
						}
					]
				}
			]
		},
		"severity": 
		{
			"patterns": 
			[
				{
					"name": "msg.severity",
					"begin": "(?i)(\\.severity)",
					"beginCaptures": 
					{
						"1":
						{
							"name": "msg.severity.keyword keyword.control"
						}
					},
					"end": "\\n",
					"patterns": 
					[
						{
							"match": "(?i)(success|informational|warning|error|severe|fatal)(.*)",
							"captures": 
							{
								"1":
								{
									"name": "constant.character"
								},
								"2":
								{
									"patterns": 
									[
										{
											"include": "#comment"
										},
										{
											"name": "invalid.illegal",
											"match": "\\S.*"
										}
									]
								}
							}
						},
						{
							"include": "#comment"
						},
						{
							"include": "#continuation"
						},
						{
							"name": "invalid.illegal",
							"match": "\\S.*"
						}
					]
				}
			]
		},
		"continuation":
		{
			"patterns": 
			[
				{
					"name": "msg.continuation",
					"match": "\\s*(-)\\s*\\n",
					"captures": 
					{
						"1":
						{
							"name": "string.regexp"
						}
					}
				},
				{
					"name": "msg.continuation-with-comment",
					"match": "\\s*(-)\\s*(!.*)\\n",
					"captures": 
					{
						"1":
						{
							"name": "string.regexp"
						},
						"2":
						{
							"patterns": 
							[
								{
									"include": "#comment"
								}
							]
						}
					}
				}
			]
		},
		"comment": 
		{
			"patterns": 
			[
				{
					"name": "comment",
					"begin": "!",
					"end": "(?=\\n)",
					"patterns": 
					[
						{
							"include": "#comment-continuation"
						}
					]
				}
			]
		},
		"comment-continuation": 
		{
			"patterns": 
			[
				{
					"name": "msg.comment.continuation",
					"match": "\\s*(-)\\s*\\n",
					"captures": 
					{
						"1":
						{
							"name": "string.regexp"
						}
					}
				}
			]
		},
		"string-content":
		{
			"patterns": 
			[
				{
					"name": "msg.string.content",
					"match": ".",
					"captures": 
					{
						"0":
						{
							"name": "string.quoted"
						}
					}
				}
			]
		},
		"string-fao": 
		{
			"name": "msg.string.$1 string.qouted",
			"begin": "(\"|')",
			"beginCaptures": 
			{
				"1":
				{
					"name": "msg.punctuation.string.open"
				}
			},
			"end": "(\\1)",
			"endCaptures": 
			{
				"1":
				{
					"name": "msg.punctuation.string.close"
				}
			},
			"patterns": 
			[
				{
					"include": "#string-content-fao"
				}
			]
		},
		"string-content-fao":
		{
			"patterns": 
			[
				{
					"name": "msg.string.fao",
					"match": "!([1-9][0-9]*)?(@?)([A-Z][A-Z])",
					"captures": 
					{
						"0":
						{
							"name": "variable.parameter"
						}
					}
				},
				{
					"name": "msg.string.fao",
					"match": "!([1-9][0-9]*)?\\(([1-9][0-9]*)?(@?)([A-Z][A-Z])\\)",
					"captures": 
					{
						"0":
						{
							"name": "variable.parameter"
						}
					}
				},
				{
					"name": "msg.string.content",
					"match": ".",
					"captures": 
					{
						"0":
						{
							"name": "string.quoted"
						}
					}
				}
			]
		}
	},
	"scopeName": "source.msg"
}